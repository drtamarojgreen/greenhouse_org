<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Plasticity Models - Table of Contents</title>
    <link rel="stylesheet" href="css/models.css">
    <style>
        body { font-family: sans-serif; text-align: center; }
        #models-toc-container { padding: 20px; }
        #test-results { text-align: left; margin: 20px; border: 1px solid #ccc; padding: 10px; }
        .pass { color: green; }
        .fail { color: red; }
    </style>
</head>
<body>
    <h1>Neural Plasticity Models</h1>
    <div id="models-toc-container"></div>
    <div id="test-results"></div>

    <script src="js/models_toc.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const resultsContainer = document.getElementById('test-results');

            function runTest(name, testFn) {
                try {
                    testFn();
                    resultsContainer.innerHTML += `<div class="pass">PASS: ${name}</div>`;
                } catch (e) {
                    resultsContainer.innerHTML += `<div class="fail">FAIL: ${name} - ${e.message}</div>`;
                }
            }

            // Wait for the dynamic buttons to be created
            setTimeout(() => {
                runTest('TOC should create four buttons', () => {
                    const buttons = document.querySelectorAll('.toc-button');
                    if (buttons.length !== 4) {
                        throw new Error(`Expected 4 buttons, but found ${buttons.length}`);
                    }
                });

                runTest('Buttons should have correct href attributes', () => {
                    const buttons = document.querySelectorAll('.toc-button');
                    const expectedHrefs = ['pathway.html', 'neuro.html', 'genetic.html', 'synapse.html'];
                    buttons.forEach((button, index) => {
                        if (!button.href.endsWith(expectedHrefs[index])) {
                            throw new Error(`Button ${index + 1} has incorrect href: ${button.href}`);
                        }
                    });
                });

                runTest('Buttons should have ARIA roles', () => {
                    const buttons = document.querySelectorAll('.toc-button');
                    buttons.forEach(button => {
                        if (button.getAttribute('role') !== 'button') {
                            throw new Error('Button is missing ARIA role.');
                        }
                    });
                });
            }, 1000); // Wait for fetch and DOM manipulation
        });
    </script>
</body>
</html>
