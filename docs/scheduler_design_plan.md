# Comprehensive Scheduler Design & Implementation Plan

This document outlines the plan to complete the design, implementation, and data integration for the Greenhouse for Mental Health appointment scheduler, built on the Wix/Velo platform.

## Part 1: Application Design and User Flow

### 1.1. User Flow

The primary user flow for scheduling an appointment will be as follows:

1.  **Service Selection:** The user lands on the scheduler page and is first prompted to select a type of service (e.g., "Individual Therapy," "Family Counseling").
2.  **Therapist Selection:** Based on the service, a list of available therapists is displayed. The user selects a therapist.
3.  **Date & Time Selection:** An interactive calendar is displayed, showing the selected therapist's availability. The user picks a date, and available time slots for that day are shown. The user selects a time slot.
4.  **Information Entry:** The user fills out a booking form with their personal details (Name, Email, Phone Number, a brief note).
5.  **Confirmation:** The user reviews the appointment details and clicks a "Book Appointment" button.
6.  **Booking Complete:** The system confirms the booking, and the user sees a "Thank You" message with the appointment details. An automated confirmation email is sent to the user.

### 1.2. UI/UX Design Mockups (Text-based)

#### a) The Main Scheduler Interface

*   **Layout:** A clean, two-column layout.
*   **Left Column (Selection Filters):**
    *   A dropdown menu labeled "Select a Service."
    *   A dropdown menu labeled "Select a Therapist" (this will be populated based on the service selected).
*   **Right Column (Calendar View):**
    *   An interactive monthly calendar will be displayed.
    *   Days with available slots for the selected therapist will be highlighted.
    *   Below the calendar, a section will display available time slots (e.g., "9:00 AM," "10:00 AM") for the selected date.

#### b) The Booking Form

*   This will appear once a user selects a time slot, perhaps in a modal window (lightbox in Wix terms) or by replacing the calendar view.
*   **Fields:**
    *   `Full Name` (Text Input, Required)
    *   `Email Address` (Email Input, Required)
    *   `Phone Number` (Phone Input, Required)
    *   `Appointment Notes` (Text Area, Optional)
*   **Summary Section:** A non-editable summary of the selected service, therapist, date, and time will be displayed at the top of the form.
*   **Button:** A clear "Confirm Your Booking" button.

#### c) The Confirmation Page/View

*   After a successful booking, the form will be replaced with a confirmation message.
*   **Content:**
    *   A prominent "Thank You! Your appointment is booked." message.
    *   A summary of the appointment details (Service, Therapist, Date, Time).
    *   A note saying, "A confirmation email has been sent to your inbox."
    *   Buttons to "Book Another Appointment" or "Return to Homepage."

---

## Part 2: Data Schema (Wix Data Collections)

For the scheduler to function correctly, the following Wix Data Collections must be set up with the specified fields and permissions.

### 2.1. `Services` Collection

*   **Purpose:** Stores the different types of services offered.
*   **Permissions:** Content (Read-only for public), Admin (Read/Write).
*   **Fields:**
    *   `title` (Primary, Text): The name of the.service (e.g., "Individual Therapy").
    *   `description` (Text): A brief description of the service.
    *   `duration` (Number): The length of the service in minutes (e.g., 60).

### 2.2. `Therapists` Collection

*   **Purpose:** Stores profiles for the healthcare professionals.
*   **Permissions:** Content (Read-only for public), Admin (Read/Write).
*   **Fields:**
    *   `name` (Primary, Text): The full name of the therapist (e.g., "Dr. Emily Carter").
    *   `email` (Text): The therapist's email address (for internal notifications).
    *   `services` (Multi-Reference): A reference to the `Services` collection. This indicates which services the therapist provides.
    *   `workingHours` (Object): A JSON object defining the therapist's weekly availability (e.g., `{"monday": {"start": 9, "end": 17}, "tuesday": ...}`).

### 2.3. `Appointments` Collection

*   **Purpose:** Stores all booked appointments.
*   **Permissions:**
    *   **Create:** Site member (any logged-in user can create their own appointment).
    *   **Read:** Site member author (a user can only read their own appointments). Admin (can read all).
    *   **Update:** Site member author / Admin.
    *   **Delete:** Admin.
*   **Fields:**
    *   `_id` (Primary, ID): Automatically generated by Wix.
    *   `therapistId` (Reference): A reference to the `Therapists` collection.
    *   `serviceId` (Reference): A reference to the `Services` collection.
    *   `contactId` (Reference): A reference to the Wix CRM `Contacts` collection for the user who booked.
    *   `startDate` (Date and Time): The start date and time of the appointment.
    *   `endDate` (Date and Time): The end date and time of the appointment.
    *   `status` (Text): The current status of the appointment (e.g., "Confirmed," "Cancelled," "Completed").
    *   `patientName` (Text): The name of the patient.
    *   `patientEmail` (Text): The email of the patient.
    *   `patientPhone` (Text): The phone number of the patient.
    *   `notes` (Text): Any notes the patient included with the booking.
